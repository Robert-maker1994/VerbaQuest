
FROM node:20-alpine

WORKDIR /app

COPY package*.json ./

RUN npm install

COPY . .
ARG VITE_API_BASEURL
ARG VITE_AUTH_MODE
ARG VITE_DEFAULT_TOKEN

ENV VITE_API_BASEURL=${VITE_API_BASEURL}
ENV VITE_AUTH_MODE=${VITE_AUTH_MODE}
ENV VITE_DEFAULT_TOKEN=${VITE_DEFAULT_TOKEN}


RUN npm run build

EXPOSE 8080

CMD ["npm", "run", "preview"]